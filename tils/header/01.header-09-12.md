헤더 components

Command, Shift and click the 'R' key.
캐시 지우고 재시작

jsx가 있는 컴포넌트는 tsx 사용,아니면 ts 사용

1. HeaderLogo 추가.
   src/components/header/HeaderLogo.tsx

prop: custom:bool, userName: string

인데, 왜 custom과 userName을 같이 받는지는 잘 모르겠다. 일단 같이 넣어줌.

styled-components는 각 comp 안에 자체적으로 css를 넣어주는 방식으로 많이 사용한다.

styles/utils 안에 css`` 방법으로 넣어줘서 이것을 styled.div에 넣어주는 방법으로도 사용했다.

<!--
  return (
    <Block> // 아무것도 없는 div, src/components/common
      <Inner> // mediaquery로 width를 나눠줌. src/components/main
        <HeaderLogo // src/components/base base는 여러곳에 쓸거같은데, 다른데서도 쓰나? //일단 안쓰니까, components/header로 넣어서 사용하자.
          custom={customHeader.custom}
          userLogo={customHeader.userLogo}
          username={customHeader.username}
        />

        {user ? ( // 일단 user는 false로 두고, 나중에 redux가 되거나 localstorage로 넣으면 분기문 작성한다.
          <Right>
            {themeReady && <ThemeToggleButton />}
            <SearchButton to={urlForSearch}>
              <SearchIcon2 />
            </SearchButton>
            <RoundButton
              border
              color="darkGray"
              style={{ marginRight: '1.25rem' }}
              to="/write"
              className="write-button"
            >
              새 글 작성
            </RoundButton>

            <div ref={ref}>
              <HeaderUserIcon user={user} onClick={toggleUserMenu} />
            </div>
            <HeaderUserMenu
              onClose={onOutsideClick}
              onLogout={onLogout}
              username={user.username}
              visible={userMenu}
            />
          </Right>
        ) : (
          <Right>
            {themeReady && <ThemeToggleButton />}
            <SearchButton to={urlForSearch}>
              <SearchIcon2 />
            </SearchButton>
            <RoundButton color="darkGray" onClick={onLoginClick}>
              로그인
            </RoundButton>
          </Right>
        )}
      </Inner>
    </Block>
  );
} -->

2. Header의 Right 부분 추가중

버튼 나열구조.

다만 Button Wrapper style이 theme 버튼과 다른 버튼이 다른데, 일단 적어보고 판단한ㄷ.

user 있을 때,

theme 버튼, search 버튼, roundbutton 새글 작성, headerUserIcon, HeaderUserMenu

user 없을 때,

theme 버튼, search 버튼, roundbutton 로그인

1. ThemeToggleButton
   Moonicon, Sunnicon 두개로 표현되며, 누르면 테마를 바꾸어 준다.

react-spring이 안깔려있어서 깔아줬다.

src/components/header/ThemeToggleButton.tsx 에서 애니메이션으로 icon을 바꾼다.
src/components/header/hooks/useToggleTheme.ts 에서 localstorage에 저장되는 theme값 바꿈.(현재는 redux가 없어서 state에 넣어줌.)
src/lib/storage.ts 에서 위 localStorage 로직이 들어있음

2. SearchButton style은 header.tsx에 styled 되어있다.

3. RoundButton

style이 너무 많아서 일단 넘어간다. 나중에 다시 볼 것.
또, 기동부 역시 redux를 사용하는데, 아무래도 일단 redux를 붙여놓고 생각해야 할거같다.

만들어놓고 보니 실제 velog와 다르게 두 헤더(오른쪽 부분)을 구분해 놓았는데, 구분해놓지 않는게 나을 거라 생각한다.

필요한 것은 로그인, 로그인 안했을 때 버튼 구성을 다시 확인해서 넣어주는 거라고 생각함.

4. 헤더의 완성을 위해선 결국 graphql까지는 아니더라도 redux까지는 넣어주는 것이 좋겠다고 생각함/. 따라서 위 구현된 것처럼 redux ducks 패턴을 넣을 것인지, 다른 것을 할것인지는 아직 생각해보지 않았는데, 일단 ducks 패턴 그대로 따라가는게 맞다고 생각함.

원래 패턴

store/
actions/
reducers/ 가 따로 있어서 reducer에서 action을 임포트하였지만, ducks는 같이 ㅆ흐는 패턴이라고 하니, 한번 배워보도록 한다.
